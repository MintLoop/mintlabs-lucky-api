---
/**
 * Mobile Demo - Phase 4.5 Prototype
 * 
 * Demonstrates the mobile-first utility-app pattern:
 * - Bottom navigation
 * - Compact generator form
 * - NumberRow component
 * - Contextual discovery (related tools)
 * 
 * Architecture Decision: Homepage = Outcome Engine
 * The homepage IS the generator. No marketing hero on mobile.
 */
import Layout from '../../layouts/Layout.astro';
import BottomNav from '../../components/mobile/BottomNav.astro';
import NumberRow from '../../components/ui/NumberRow.astro';

// Sample data for demo
const sampleResults = [
  { numbers: [7, 14, 21, 35, 42], bonus: 18, game: 'Powerball', mode: 'Hot Numbers' },
  { numbers: [3, 17, 28, 34, 51], bonus: 4, game: 'Powerball', mode: 'Hot Numbers' },
  { numbers: [11, 22, 33, 44, 55], bonus: 9, game: 'Powerball', mode: 'Hot Numbers' },
];

const relatedTools = [
  { title: 'Repeat Checker', href: '/tools/repeat-checker', icon: 'üîÑ' },
  { title: 'Hot/Cold Numbers', href: '/tools/hot-cold-numbers', icon: 'üî•' },
  { title: 'Lottery Odds', href: '/lottery-odds', icon: 'üìä' },
];
---

<Layout 
  title="Mobile Demo | Lucky Numbers" 
  description="Phase 4.5 mobile-first prototype demonstrating utility-app pattern."
>
  <main class="mobile-demo">
    {/* Compact Header - Game/Mode selector */}
    <header class="demo-header">
      <div class="header-content">
        <h1 class="header-title">üé≤ Lucky Numbers</h1>
        <button class="settings-btn" aria-label="Settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path>
          </svg>
        </button>
      </div>
    </header>

    {/* Quick Selector */}
    <section class="quick-selector">
      <div class="selector-row">
        <select class="game-select" aria-label="Select game">
          <option value="powerball">Powerball</option>
          <option value="mega_millions">Mega Millions</option>
          <option value="lucky_day">Lucky Day</option>
          <option value="pick3">Pick 3</option>
          <option value="pick4">Pick 4</option>
        </select>
        <select class="mode-select" aria-label="Select mode">
          <option value="hot">üî• Hot Numbers</option>
          <option value="cold">‚ùÑÔ∏è Cold Numbers</option>
          <option value="balanced">‚öñÔ∏è Balanced</option>
          <option value="birthday">üéÇ Birthday</option>
          <option value="zodiac">‚ôà Zodiac</option>
        </select>
      </div>
    </section>

    {/* Generate CTA - Primary Action */}
    <section class="generate-section">
      <button class="generate-btn" id="generateBtn">
        <span class="btn-icon">‚ö°</span>
        Generate Numbers
      </button>
      <p class="sets-indicator">5 sets ‚Ä¢ Powerball</p>
    </section>

    {/* Results Area */}
    <section class="results-section" id="resultsSection">
      <h2 class="results-title">Your Numbers</h2>
      
      <div class="results-list">
        {sampleResults.map((result, index) => (
          <div class="result-card" style={`--delay: ${index * 0.1}s`}>
            <div class="result-header">
              <span class="set-number">Set {index + 1}</span>
              <span class="mode-badge">{result.mode}</span>
            </div>
            <NumberRow 
              numbers={result.numbers} 
              bonus={result.bonus}
              animate={true}
              size="md"
            />
            <div class="result-footer">
              <span class="odds-text">Odds: 1 in 292,201,338</span>
              <a href="/lottery-odds?game=powerball" class="odds-link">View math ‚Üí</a>
            </div>
          </div>
        ))}
      </div>
    </section>

    {/* Contextual Discovery - Related Tools */}
    <section class="discovery-section">
      <h2 class="discovery-title">Related Tools</h2>
      <div class="tool-chips">
        {relatedTools.map((tool) => (
          <a href={tool.href} class="tool-chip">
            <span class="chip-icon">{tool.icon}</span>
            <span class="chip-label">{tool.title}</span>
          </a>
        ))}
      </div>
    </section>

    {/* Educational Footer */}
    <section class="edu-footer">
      <p class="edu-text">
        <strong>Remember:</strong> Every draw is independent. Past results don't affect future outcomes.
      </p>
      <a href="/education/probability-basics" class="edu-link">Learn about lottery probability ‚Üí</a>
    </section>
  </main>

  {/* Mobile Bottom Navigation */}
  <BottomNav activeTab="numbers" />
</Layout>

<style>
  /* Mobile Demo Page Styles */
  .mobile-demo {
    min-height: 100vh;
    background: var(--bg-base, #ffffff);
    padding-bottom: var(--page-padding-bottom, 80px);
  }

  /* Header */
  .demo-header {
    position: sticky;
    top: 0;
    z-index: var(--z-sticky, 60);
    background: var(--bg-surface-elevated, #ffffff);
    border-bottom: 1px solid var(--border-primary, #e5e7eb);
    padding: var(--space-sm, 0.75rem) var(--space-md, 1rem);
  }

  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 600px;
    margin: 0 auto;
  }

  .header-title {
    font-size: var(--text-lg, 1.125rem);
    font-weight: var(--font-weight-bold, 700);
    color: var(--text-primary, #111827);
    margin: 0;
  }

  .settings-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: transparent;
    border: none;
    border-radius: var(--radius-md, 0.5rem);
    color: var(--text-secondary, #4b5563);
    cursor: pointer;
    transition: background var(--duration-fast, 150ms);
  }

  .settings-btn:hover {
    background: var(--bg-surface-1, #f9fafb);
  }

  /* Quick Selector */
  .quick-selector {
    padding: var(--space-md, 1rem);
    max-width: 600px;
    margin: 0 auto;
  }

  .selector-row {
    display: flex;
    gap: var(--space-sm, 0.75rem);
  }

  .game-select,
  .mode-select {
    flex: 1;
    padding: var(--space-sm, 0.75rem) var(--space-md, 1rem);
    font-size: var(--text-sm, 0.875rem);
    font-weight: var(--font-weight-medium, 500);
    color: var(--text-primary, #111827);
    background: var(--bg-surface-1, #f9fafb);
    border: 1px solid var(--border-primary, #e5e7eb);
    border-radius: var(--radius-lg, 0.75rem);
    cursor: pointer;
    min-height: var(--tap-target-min, 44px);
  }

  /* Generate Section */
  .generate-section {
    padding: var(--space-md, 1rem);
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }

  .generate-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-xs, 0.5rem);
    width: 100%;
    max-width: 400px;
    padding: var(--space-md, 1rem) var(--space-xl, 2rem);
    font-size: var(--text-lg, 1.125rem);
    font-weight: var(--font-weight-bold, 700);
    color: var(--text-on-accent, #ffffff);
    background: var(--accent-primary, #10b981);
    border: none;
    border-radius: var(--radius-xl, 1rem);
    box-shadow: var(--shadow-soft-md);
    cursor: pointer;
    transition: transform var(--duration-fast), box-shadow var(--duration-fast);
    min-height: 56px;
  }

  .generate-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft-lg), var(--shadow-glow);
  }

  .generate-btn:active {
    transform: translateY(0);
  }

  .btn-icon {
    font-size: 24px;
  }

  .sets-indicator {
    margin-top: var(--space-xs, 0.5rem);
    font-size: var(--text-sm, 0.875rem);
    color: var(--text-muted, #9ca3af);
  }

  /* Results Section */
  .results-section {
    padding: var(--space-md, 1rem);
    max-width: 600px;
    margin: 0 auto;
  }

  .results-title {
    font-size: var(--text-lg, 1.125rem);
    font-weight: var(--font-weight-semibold, 600);
    color: var(--text-primary, #111827);
    margin: 0 0 var(--space-md, 1rem);
  }

  .results-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md, 1rem);
  }

  .result-card {
    background: var(--bg-surface-1, #f9fafb);
    border: 1px solid var(--border-primary, #e5e7eb);
    border-radius: var(--radius-lg, 0.75rem);
    padding: var(--space-md, 1rem);
    animation: slideIn 0.3s ease-out backwards;
    animation-delay: var(--delay, 0s);
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .result-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-sm, 0.75rem);
  }

  .set-number {
    font-size: var(--text-sm, 0.875rem);
    font-weight: var(--font-weight-medium, 500);
    color: var(--text-secondary, #4b5563);
  }

  .mode-badge {
    font-size: var(--text-xs, 0.75rem);
    font-weight: var(--font-weight-semibold, 600);
    color: var(--accent-primary, #10b981);
    background: rgba(16, 185, 129, 0.1);
    padding: 2px 8px;
    border-radius: var(--radius-full, 9999px);
  }

  .result-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: var(--space-sm, 0.75rem);
    padding-top: var(--space-sm, 0.75rem);
    border-top: 1px solid var(--border-secondary, #f3f4f6);
  }

  .odds-text {
    font-size: var(--text-xs, 0.75rem);
    color: var(--text-muted, #9ca3af);
  }

  .odds-link {
    font-size: var(--text-xs, 0.75rem);
    color: var(--accent-primary, #10b981);
    text-decoration: none;
    font-weight: var(--font-weight-medium, 500);
  }

  .odds-link:hover {
    text-decoration: underline;
  }

  /* Discovery Section */
  .discovery-section {
    padding: var(--space-md, 1rem);
    max-width: 600px;
    margin: 0 auto;
  }

  .discovery-title {
    font-size: var(--text-sm, 0.875rem);
    font-weight: var(--font-weight-semibold, 600);
    color: var(--text-muted, #9ca3af);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 var(--space-sm, 0.75rem);
  }

  .tool-chips {
    display: flex;
    gap: var(--space-xs, 0.5rem);
    flex-wrap: wrap;
  }

  .tool-chip {
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs, 0.5rem);
    padding: var(--space-xs, 0.5rem) var(--space-md, 1rem);
    background: var(--bg-surface-1, #f9fafb);
    border: 1px solid var(--border-primary, #e5e7eb);
    border-radius: var(--radius-full, 9999px);
    text-decoration: none;
    color: var(--text-primary, #111827);
    font-size: var(--text-sm, 0.875rem);
    font-weight: var(--font-weight-medium, 500);
    transition: background var(--duration-fast), border-color var(--duration-fast);
    min-height: var(--tap-target-min, 44px);
  }

  .tool-chip:hover {
    background: var(--bg-surface-2, #f3f4f6);
    border-color: var(--accent-primary, #10b981);
  }

  .chip-icon {
    font-size: 16px;
  }

  /* Educational Footer */
  .edu-footer {
    padding: var(--space-lg, 1.5rem) var(--space-md, 1rem);
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
  }

  .edu-text {
    font-size: var(--text-sm, 0.875rem);
    color: var(--text-secondary, #4b5563);
    line-height: var(--line-height-relaxed, 1.75);
    margin: 0 0 var(--space-xs, 0.5rem);
  }

  .edu-link {
    font-size: var(--text-sm, 0.875rem);
    color: var(--accent-primary, #10b981);
    text-decoration: none;
    font-weight: var(--font-weight-medium, 500);
  }

  .edu-link:hover {
    text-decoration: underline;
  }

  /* Desktop adjustments */
  @media (min-width: 768px) {
    .mobile-demo {
      padding-bottom: var(--space-2xl, 3rem);
    }

    .demo-header {
      padding: var(--space-md, 1rem) var(--space-lg, 1.5rem);
    }

    .generate-btn {
      max-width: 300px;
    }

    .selector-row {
      max-width: 400px;
      margin: 0 auto;
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .result-card {
      animation: none;
    }
    
    .generate-btn {
      transition: none;
    }
  }
</style>

<script>
  // Simple demo interaction
  document.getElementById('generateBtn')?.addEventListener('click', () => {
    const results = document.getElementById('resultsSection');
    if (results) {
      // Re-trigger animations
      const cards = results.querySelectorAll('.result-card');
      cards.forEach((card, i) => {
        card.classList.remove('animate');
        void (card as HTMLElement).offsetWidth; // Trigger reflow
        card.classList.add('animate');
      });
      
      // Scroll to results
      results.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
</script>
