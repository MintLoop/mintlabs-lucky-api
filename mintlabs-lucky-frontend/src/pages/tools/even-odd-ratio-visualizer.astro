---
import InfoLayout from "../../components/InfoLayout.astro";
import TrackLink from "../../components/TrackLink.astro";
---

<InfoLayout 
  title="Even/Odd Ratio Visualizer"
  subtitle="Analyze and visualize the balance between even and odd numbers"
  pageTitle="Even/Odd Ratio Visualizer - Lottery Number Balance Tool | MintLabs"
  description="Visualize the even/odd ratio in your lottery numbers. See how balanced your picks are and compare with historical draw patterns."
  keywords="even odd lottery numbers, lottery number balance, even odd ratio, lottery balance calculator, odd even distribution"
>
  <div slot="teaser">
    <strong class="text-emerald-400">‚öñÔ∏è Balance Analysis:</strong>
    Check if your numbers are balanced between even and odd. See typical patterns from real lottery draws.
  </div>

  <section class="rounded-2xl border border-[var(--border-primary)] bg-[var(--surface-elevated)] p-6 shadow-[var(--card-shadow)]">
    <h2 class="text-xl font-semibold text-emerald-300 mb-4">Enter Your Numbers</h2>
    
    <div class="mb-4">
      <label for="numbers-input" class="block text-sm font-medium text-gray-300 mb-2">
        Enter 5-7 numbers (comma or space separated):
      </label>
      <input 
        type="text" 
        id="numbers-input"
        placeholder="e.g., 7, 12, 23, 34, 45, 56"
        class="w-full rounded-lg border border-[var(--border-primary)] bg-[var(--surface-elevated)] px-4 py-3 text-white placeholder-gray-500 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"
      />
    </div>

    <button
      id="analyze-btn"
      class="w-full rounded-lg bg-gradient-to-r from-emerald-500 to-teal-600 px-6 py-3 font-semibold text-white shadow-lg transition-all hover:from-emerald-600 hover:to-teal-700 hover:shadow-xl"
    >
      Analyze Even/Odd Ratio
    </button>
  </section>

  <section id="results-section" class="hidden rounded-2xl border border-[var(--border-primary)] bg-[var(--surface-elevated)] p-6 shadow-[var(--card-shadow)] mt-6">
    <h2 class="text-xl font-semibold text-emerald-300 mb-4">Ratio Analysis</h2>
    
    <div id="numbers-display" class="mb-6"></div>

    <div class="grid gap-6 md:grid-cols-2 mb-6">
      <div class="p-6 rounded-lg bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/30">
        <div class="text-sm text-gray-400 mb-1">Even Numbers</div>
        <div class="text-4xl font-bold text-blue-400" id="even-count">0</div>
        <div class="mt-3 text-sm text-gray-300" id="even-list"></div>
      </div>
      <div class="p-6 rounded-lg bg-gradient-to-br from-purple-500/10 to-purple-600/5 border border-purple-500/30">
        <div class="text-sm text-gray-400 mb-1">Odd Numbers</div>
        <div class="text-4xl font-bold text-purple-400" id="odd-count">0</div>
        <div class="mt-3 text-sm text-gray-300" id="odd-list"></div>
      </div>
    </div>

    <div class="mb-6">
      <h3 class="text-lg font-semibold text-emerald-300 mb-3">Visual Ratio</h3>
      <div class="relative h-12 rounded-lg overflow-hidden border border-[var(--border-primary)]">
        <div id="even-bar" class="absolute left-0 top-0 h-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold transition-all duration-500" style="width: 50%;">
          <span id="even-percent">50%</span>
        </div>
        <div id="odd-bar" class="absolute right-0 top-0 h-full bg-gradient-to-r from-purple-500 to-purple-600 flex items-center justify-center text-white font-semibold transition-all duration-500" style="width: 50%;">
          <span id="odd-percent">50%</span>
        </div>
      </div>
      <div class="flex justify-between mt-2 text-sm text-gray-400">
        <span>‚Üê Even</span>
        <span>Odd ‚Üí</span>
      </div>
    </div>

    <div id="balance-assessment" class="p-4 rounded-lg border mb-6"></div>

    <div class="space-y-4">
      <h3 class="text-lg font-semibold text-emerald-300">Common Patterns in Real Draws</h3>
      <div class="grid gap-3">
        <div class="p-3 rounded-lg bg-slate-900/50 border border-[var(--border-primary-darker)] flex items-center justify-between">
          <span class="text-gray-300">3 Even / 3 Odd</span>
          <span class="text-sm text-emerald-400 font-semibold">Most Common (~33%)</span>
        </div>
        <div class="p-3 rounded-lg bg-slate-900/50 border border-[var(--border-primary-darker)] flex items-center justify-between">
          <span class="text-gray-300">4 Even / 2 Odd or 2 Even / 4 Odd</span>
          <span class="text-sm text-yellow-400 font-semibold">Common (~23% each)</span>
        </div>
        <div class="p-3 rounded-lg bg-slate-900/50 border border-[var(--border-primary-darker)] flex items-center justify-between">
          <span class="text-gray-300">5 Even / 1 Odd or 1 Even / 5 Odd</span>
          <span class="text-sm text-orange-400 font-semibold">Less Common (~10% each)</span>
        </div>
        <div class="p-3 rounded-lg bg-slate-900/50 border border-[var(--border-primary-darker)] flex items-center justify-between">
          <span class="text-gray-300">6 Even / 0 Odd or 0 Even / 6 Odd</span>
          <span class="text-sm text-red-400 font-semibold">Rare (~1.5% each)</span>
        </div>
      </div>
    </div>
  </section>

  <section class="rounded-2xl border border-[var(--border-primary)] bg-[var(--surface-elevated)] p-6 shadow-[var(--card-shadow)] mt-6">
    <h2 class="text-xl font-semibold text-emerald-300 mb-4">Understanding Even/Odd Balance</h2>
    
    <div class="space-y-4 text-gray-300">
      <div>
        <h3 class="text-lg font-semibold text-emerald-300 mb-2">What Is Even/Odd Balance?</h3>
        <p>The even/odd ratio shows how your numbers are distributed between even numbers (2, 4, 6, 8...) and odd numbers (1, 3, 5, 7...). A "balanced" set typically has 3 even and 3 odd numbers.</p>
      </div>

      <div>
        <h3 class="text-lg font-semibold text-emerald-300 mb-2">Historical Patterns</h3>
        <p class="mb-3">Analysis of thousands of lottery draws shows these patterns:</p>
        <ul class="list-disc list-inside space-y-2 ml-4">
          <li><strong class="text-white">Perfect Balance (3/3):</strong> Most common pattern, appearing in about 33% of draws</li>
          <li><strong class="text-white">Slight Imbalance (4/2 or 2/4):</strong> Second most common, ~46% combined</li>
          <li><strong class="text-white">Heavy Imbalance (5/1 or 1/5):</strong> Uncommon, ~19% combined</li>
          <li><strong class="text-white">All Even or All Odd (6/0 or 0/6):</strong> Very rare, ~3% combined</li>
        </ul>
      </div>

      <div class="p-4 rounded-lg bg-blue-500/10 border border-blue-500/30">
        <p class="text-sm text-blue-300">
          <strong>üìä Statistical Reality:</strong> While balanced sets (3/3) are more common, this is simply due to combinatorial math ‚Äî there are more ways to arrange a balanced set. Each specific combination still has equal probability.
        </p>
      </div>

      <div>
        <h3 class="text-lg font-semibold text-emerald-300 mb-2">Should You Play Balanced Numbers?</h3>
        <p class="mb-2">The short answer: <strong class="text-white">It doesn't matter mathematically</strong>.</p>
        <ul class="list-disc list-inside space-y-2 ml-4">
          <li><strong class="text-white">Equal Probability:</strong> Every specific combination has the same odds, regardless of even/odd ratio</li>
          <li><strong class="text-white">Pattern Frequency:</strong> 3/3 appears more often simply because there are more 3/3 combinations available</li>
          <li><strong class="text-white">Personal Preference:</strong> Some players prefer "balanced" sets psychologically, which is fine for enjoyment</li>
        </ul>
      </div>

      <div class="p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/30">
        <p class="text-sm text-yellow-300">
          <strong>‚ö†Ô∏è Important:</strong> Playing balanced numbers does NOT increase your chances of winning. The lottery draw machine doesn't care about even/odd ratios ‚Äî it picks numbers purely randomly.
        </p>
      </div>
    </div>
  </section>

  <section class="rounded-2xl border border-[var(--border-primary)] bg-[var(--surface-elevated)] p-6 shadow-[var(--card-shadow)] mt-6">
    <h2 class="text-xl font-semibold text-emerald-300 mb-4">Related Tools</h2>
    <div class="grid gap-4 md:grid-cols-2">
      <TrackLink href="/tools/high-low-ratio-analyzer" location="even-odd-visualizer" action="click-related-highlow">
        <div class="p-4 rounded-lg border border-[var(--border-primary)] bg-slate-900/50 hover:bg-slate-800/50 transition-colors">
          <h3 class="font-semibold text-emerald-300 mb-1">High/Low Ratio Analyzer</h3>
          <p class="text-sm text-gray-400">Check high vs low number distribution</p>
        </div>
      </TrackLink>
      <TrackLink href="/tools/pattern-analyzer" location="even-odd-visualizer" action="click-related-pattern">
        <div class="p-4 rounded-lg border border-[var(--border-primary)] bg-slate-900/50 hover:bg-slate-800/50 transition-colors">
          <h3 class="font-semibold text-emerald-300 mb-1">Pattern Analyzer</h3>
          <p class="text-sm text-gray-400">Complete pattern analysis with multiple metrics</p>
        </div>
      </TrackLink>
      <TrackLink href="/tools/number-spread-visualizer" location="even-odd-visualizer" action="click-related-spread">
        <div class="p-4 rounded-lg border border-[var(--border-primary)] bg-slate-900/50 hover:bg-slate-800/50 transition-colors">
          <h3 class="font-semibold text-emerald-300 mb-1">Number Spread Visualizer</h3>
          <p class="text-sm text-gray-400">See dispersion on a number line</p>
        </div>
      </TrackLink>
      <TrackLink href="/" location="even-odd-visualizer" action="click-related-generator">
        <div class="p-4 rounded-lg border border-[var(--border-primary)] bg-slate-900/50 hover:bg-slate-800/50 transition-colors">
          <h3 class="font-semibold text-emerald-300 mb-1">Lucky Number Generator</h3>
          <p class="text-sm text-gray-400">Generate random picks for any lottery</p>
        </div>
      </TrackLink>
    </div>
  </section>
</InfoLayout>

<script>
  const analyzeBtn = document.getElementById('analyze-btn')!;
  const resultsSection = document.getElementById('results-section')!;
  const numbersInput = document.getElementById('numbers-input') as HTMLInputElement;
  const numbersDisplay = document.getElementById('numbers-display')!;
  const evenCount = document.getElementById('even-count')!;
  const oddCount = document.getElementById('odd-count')!;
  const evenList = document.getElementById('even-list')!;
  const oddList = document.getElementById('odd-list')!;
  const evenBar = document.getElementById('even-bar')!;
  const oddBar = document.getElementById('odd-bar')!;
  const evenPercent = document.getElementById('even-percent')!;
  const oddPercent = document.getElementById('odd-percent')!;
  const balanceAssessment = document.getElementById('balance-assessment')!;

  function parseNumbers(input: string): number[] {
    return input
      .split(/[,\s]+/)
      .map(s => parseInt(s.trim()))
      .filter(n => !isNaN(n) && n > 0)
      .sort((a, b) => a - b);
  }

  function getBalanceInfo(evenCnt: number, oddCnt: number) {
    const total = evenCnt + oddCnt;
    const ratio = `${evenCnt}/${oddCnt}`;
    
    if (evenCnt === oddCnt) {
      return {
        rating: 'Perfectly Balanced',
        color: 'border-emerald-500/30 bg-emerald-500/10',
        textColor: 'text-emerald-400',
        message: `Your ${ratio} split is the most common pattern in lottery draws (~33%). This is a balanced, statistically typical selection.`,
        icon: '‚úÖ'
      };
    } else if (Math.abs(evenCnt - oddCnt) === 2) {
      return {
        rating: 'Slightly Imbalanced',
        color: 'border-yellow-500/30 bg-yellow-500/10',
        textColor: 'text-yellow-400',
        message: `Your ${ratio} split is common in lottery draws (~23%). This represents a slight imbalance but is still very typical.`,
        icon: '‚öñÔ∏è'
      };
    } else if (Math.abs(evenCnt - oddCnt) === 4) {
      return {
        rating: 'Heavily Imbalanced',
        color: 'border-orange-500/30 bg-orange-500/10',
        textColor: 'text-orange-400',
        message: `Your ${ratio} split is less common (~10% of draws). Heavy imbalances occur but are statistically rarer.`,
        icon: '‚ö†Ô∏è'
      };
    } else {
      return {
        rating: 'Extreme Imbalance',
        color: 'border-red-500/30 bg-red-500/10',
        textColor: 'text-red-400',
        message: `Your ${ratio} split is very rare (~1.5% of draws). All-even or all-odd sets almost never appear in lottery history.`,
        icon: 'üî¥'
      };
    }
  }

  analyzeBtn.addEventListener('click', () => {
    const input = numbersInput.value;
    
    if (!input.trim()) {
      alert('Please enter some numbers first');
      return;
    }
    
    const numbers = parseNumbers(input);
    
    if (numbers.length < 5 || numbers.length > 7) {
      alert('Please enter between 5 and 7 valid numbers');
      return;
    }
    
    const evens = numbers.filter(n => n % 2 === 0);
    const odds = numbers.filter(n => n % 2 === 1);
    
    const evenCnt = evens.length;
    const oddCnt = odds.length;
    const total = numbers.length;
    
    const evenPct = Math.round((evenCnt / total) * 100);
    const oddPct = Math.round((oddCnt / total) * 100);
    
    // Display categorized numbers
    numbersDisplay.innerHTML = `
      <div class="grid gap-4 md:grid-cols-2">
        <div class="space-y-2">
          <div class="text-sm font-medium text-blue-400">Even Numbers (${evenCnt})</div>
          <div class="flex flex-wrap gap-2">
            ${evens.map(n => `
              <div class="px-3 py-2 rounded-lg bg-blue-600/20 border border-blue-500/30 text-white font-bold">
                ${n}
              </div>
            `).join('')}
            ${evenCnt === 0 ? '<span class="text-gray-500 text-sm">None</span>' : ''}
          </div>
        </div>
        <div class="space-y-2">
          <div class="text-sm font-medium text-purple-400">Odd Numbers (${oddCnt})</div>
          <div class="flex flex-wrap gap-2">
            ${odds.map(n => `
              <div class="px-3 py-2 rounded-lg bg-purple-600/20 border border-purple-500/30 text-white font-bold">
                ${n}
              </div>
            `).join('')}
            ${oddCnt === 0 ? '<span class="text-gray-500 text-sm">None</span>' : ''}
          </div>
        </div>
      </div>
    `;
    
    // Update counts
    evenCount.textContent = evenCnt.toString();
    oddCount.textContent = oddCnt.toString();
    evenList.textContent = evens.length > 0 ? evens.join(', ') : 'None';
    oddList.textContent = odds.length > 0 ? odds.join(', ') : 'None';
    
    // Update visual bar
    evenBar.style.width = `${evenPct}%`;
    oddBar.style.width = `${oddPct}%`;
    evenPercent.textContent = `${evenPct}%`;
    oddPercent.textContent = `${oddPct}%`;
    
    // Balance assessment
    const balance = getBalanceInfo(evenCnt, oddCnt);
    balanceAssessment.className = `p-4 rounded-lg border ${balance.color}`;
    balanceAssessment.innerHTML = `
      <div class="flex items-start gap-3">
        <div class="text-3xl">${balance.icon}</div>
        <div class="flex-1">
          <div class="text-lg font-semibold ${balance.textColor} mb-2">${balance.rating}</div>
          <p class="text-sm text-gray-300">${balance.message}</p>
        </div>
      </div>
    `;
    
    // Show results
    resultsSection.classList.remove('hidden');
    resultsSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  });
</script>

<style>
  /* Token-compliant responsive design */
  @media (max-width: 640px) {
    #numbers-display > div {
      grid-template-columns: 1fr;
    }
  }
</style>
