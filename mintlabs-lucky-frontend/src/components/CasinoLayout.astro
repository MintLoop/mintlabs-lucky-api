---
/**
 * CasinoLayout - Minimal layout for Casino-Lite games
 * No lottery-specific elements (teaser box, Generate Numbers button)
 * Clean header with breadcrumb, theme selector, and balance display
 */
import Layout from "../layouts/Layout.astro";
import ThemeSelector from "./ThemeSelector.astro";

export interface Props {
  title: string;
  description?: string;
  pageTitle?: string;
  showBalance?: boolean;
}

const {
  title,
  description,
  pageTitle,
  showBalance = true,
} = Astro.props;

const seoTitle = pageTitle || `${title} | Casino-Lite - MintLabs Lucky Numbers`;
---

<Layout title={seoTitle} description={description}>
  <main class="mx-auto max-w-5xl px-4 sm:px-6 py-6 space-y-6">
    <!-- Top Bar: Breadcrumb + Theme + Balance -->
    <div class="flex flex-wrap items-center justify-between gap-3">
      <nav class="text-sm" aria-label="Breadcrumb">
        <ol class="flex items-center gap-2 theme-text-muted">
          <li><a href="/" class="hover:text-[var(--accent-primary)] transition-colors">Home</a></li>
          <li><span class="opacity-50">/</span></li>
          <li><a href="/casino-lite" class="hover:text-[var(--accent-primary)] transition-colors">Casino-Lite</a></li>
          <li><span class="opacity-50">/</span></li>
          <li class="theme-text-primary font-medium truncate">{title}</li>
        </ol>
      </nav>

      <div class="flex items-center gap-3">
        {showBalance && (
          <div id="catnip-balance-header" class="text-sm font-mono px-3 py-1.5 rounded-lg" style="background: var(--surface); border: 1px solid var(--border-primary);">
            <span class="theme-text-muted">ðŸª™</span>
            <span id="header-balance-value" class="theme-text-primary font-semibold">1000</span>
            <span class="theme-text-muted">CC</span>
          </div>
        )}
        <ThemeSelector id="casinoThemeSelect" />
      </div>
    </div>

    <!-- Main Content -->
    <slot />

    <!-- RNG Transparency Notice -->
    <div class="mt-8 p-4 rounded-xl text-xs" style="background: var(--surface); border: 1px solid var(--border-primary);">
      <div class="flex items-start gap-3">
        <span class="text-lg">ðŸŽ²</span>
        <div style="color: var(--text-secondary);">
          <strong style="color: var(--text-primary);">Fair & Transparent RNG</strong>
          <p class="mt-1">All games use <code class="px-1 py-0.5 rounded text-[10px]" style="background: var(--surface-elevated);">crypto.getRandomValues()</code> - a cryptographically secure random number generator built into your browser. This provides casino-grade randomness with no server-side manipulation. Each outcome is independent and unpredictable.</p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-8 pt-8 border-t border-[var(--border-primary)]">
      <!-- Footer Navigation -->
      <div class="grid gap-8 md:grid-cols-3 mb-8 text-sm">
        <div>
          <h4 class="font-semibold mb-3" style="color: var(--text-secondary);">Education</h4>
          <ul class="space-y-2" style="color: var(--text-muted);">
            <li><a href="/lottery-odds" class="hover:text-[var(--accent-primary)] transition-colors">Lottery Odds</a></li>
            <li><a href="/lottery-math" class="hover:text-[var(--accent-primary)] transition-colors">The Math</a></li>
            <li><a href="/faq" class="hover:text-[var(--accent-primary)] transition-colors">FAQ</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-3" style="color: var(--text-secondary);">Tools</h4>
          <ul class="space-y-2" style="color: var(--text-muted);">
            <li><a href="/tools" class="hover:text-[var(--accent-primary)] transition-colors">All Tools</a></li>
            <li><a href="/casino-lite" class="hover:text-[var(--accent-primary)] transition-colors">Casino-Lite</a></li>
            <li><a href="/tools/payout-calculator" class="hover:text-[var(--accent-primary)] transition-colors">Payout Calculator</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-3" style="color: var(--text-secondary);">Legal</h4>
          <ul class="space-y-2" style="color: var(--text-muted);">
            <li><a href="/terms" class="hover:text-[var(--accent-primary)] transition-colors">Terms & Conditions</a></li>
            <li><a href="/privacy" class="hover:text-[var(--accent-primary)] transition-colors">Privacy Policy</a></li>
          </ul>
        </div>
      </div>

      <!-- Copyright and branding -->
      <div class="text-center text-sm border-t border-[var(--border-primary)] pt-6" style="color: var(--text-muted);">
        <p>Â© 2025 MintLabs. All rights reserved.</p>
        <div class="mt-3 flex items-center justify-center gap-2 text-xs">
          <img src="/mintlab.png" alt="MintLabs" class="h-4 w-4 opacity-70" />
          <span>Powered by MintLabs</span>
        </div>
        <p class="mt-4 text-xs max-w-lg mx-auto" style="color: var(--text-muted);">
          For entertainment and education purposes only. Casino-Lite games use MintyCatnipCoin (MCC), a fictional currency with absolutely no real-world monetary value. We do not predict lottery numbers or casino outcomes. No real gambling occurs on this site. Play responsibly.
        </p>
        <p class="mt-3 text-xs">
          If you or someone you know has a gambling problem, visit
          <a href="https://www.ncpgambling.org" target="_blank" rel="noopener noreferrer" class="underline hover:text-[var(--accent-primary)]">ncpgambling.org</a>
          or call <strong>1-800-522-4700</strong>.
        </p>
      </div>
    </footer>
  </main>
</Layout>

{showBalance && (
  <script>
    import { getCatnipBalance } from '../utils/catnipCoin';

    function updateHeaderBalance() {
      const el = document.getElementById('header-balance-value');
      if (el) {
        el.textContent = getCatnipBalance().toLocaleString();
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', updateHeaderBalance);

    // Listen for balance changes
    window.addEventListener('catnipBalanceChange', updateHeaderBalance);
  </script>
)}
